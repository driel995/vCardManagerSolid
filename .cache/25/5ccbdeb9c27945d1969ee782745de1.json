{"id":"KudW","dependencies":[{"name":"C:\\Users\\39351\\Progetti\\SolidProject\\package.json","includedInParent":true,"mtime":1671127455006},{"name":"C:\\Users\\39351\\Progetti\\SolidProject\\node_modules\\jose\\dist\\browser\\package.json","includedInParent":true,"mtime":1671123289894},{"name":"../runtime/fetch_jwks.js","loc":{"line":1,"column":22,"index":22},"parent":"C:\\Users\\39351\\Progetti\\SolidProject\\node_modules\\jose\\dist\\browser\\jwks\\remote.js","resolved":"C:\\Users\\39351\\Progetti\\SolidProject\\node_modules\\jose\\dist\\browser\\runtime\\fetch_jwks.js"},{"name":"../runtime/env.js","loc":{"line":2,"column":36,"index":87},"parent":"C:\\Users\\39351\\Progetti\\SolidProject\\node_modules\\jose\\dist\\browser\\jwks\\remote.js","resolved":"C:\\Users\\39351\\Progetti\\SolidProject\\node_modules\\jose\\dist\\browser\\runtime\\env.js"},{"name":"../util/errors.js","loc":{"line":3,"column":47,"index":156},"parent":"C:\\Users\\39351\\Progetti\\SolidProject\\node_modules\\jose\\dist\\browser\\jwks\\remote.js","resolved":"C:\\Users\\39351\\Progetti\\SolidProject\\node_modules\\jose\\dist\\browser\\util\\errors.js"},{"name":"./local.js","loc":{"line":4,"column":40,"index":218},"parent":"C:\\Users\\39351\\Progetti\\SolidProject\\node_modules\\jose\\dist\\browser\\jwks\\remote.js","resolved":"C:\\Users\\39351\\Progetti\\SolidProject\\node_modules\\jose\\dist\\browser\\jwks\\local.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.createRemoteJWKSet=r;var e=n(require(\"../runtime/fetch_jwks.js\")),t=require(\"../runtime/env.js\"),i=require(\"../util/errors.js\"),o=require(\"./local.js\");function n(e){return e&&e.__esModule?e:{default:e}}class s extends o.LocalJWKSet{constructor(e,t){if(super({keys:[]}),this._jwks=void 0,!(e instanceof URL))throw new TypeError(\"url must be an instance of URL\");this._url=new URL(e.href),this._options={agent:null==t?void 0:t.agent,headers:null==t?void 0:t.headers},this._timeoutDuration=\"number\"==typeof(null==t?void 0:t.timeoutDuration)?null==t?void 0:t.timeoutDuration:5e3,this._cooldownDuration=\"number\"==typeof(null==t?void 0:t.cooldownDuration)?null==t?void 0:t.cooldownDuration:3e4,this._cacheMaxAge=\"number\"==typeof(null==t?void 0:t.cacheMaxAge)?null==t?void 0:t.cacheMaxAge:6e5}coolingDown(){return\"number\"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return\"number\"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(e,t){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(e,t)}catch(o){if(o instanceof i.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),super.getKey(e,t);throw o}}async reload(){if(this._pendingFetch&&(0,t.isCloudflareWorkers)())return new Promise(e=>{const t=()=>{void 0===this._pendingFetch?e():setTimeout(t,5)};t()});this._pendingFetch||(this._pendingFetch=(0,e.default)(this._url,this._timeoutDuration,this._options).then(e=>{if(!(0,o.isJWKSLike)(e))throw new i.JWKSInvalid(\"JSON Web Key Set malformed\");this._jwks={keys:e.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(e=>{throw this._pendingFetch=void 0,e})),await this._pendingFetch}}function r(e,t){return s.prototype.getKey.bind(new s(e,t))}"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":0}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":13}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":20}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":35}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":43}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":56}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":57}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":64}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":68}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":76}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":81,"column":0},"generated":{"line":1,"column":95}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":1,"column":0},"generated":{"line":1,"column":101}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":1,"column":0},"generated":{"line":1,"column":103}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":1,"column":0},"generated":{"line":1,"column":105}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":1,"column":0},"generated":{"line":1,"column":113}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":2,"column":0},"generated":{"line":1,"column":142}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":2,"column":0},"generated":{"line":1,"column":144}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":2,"column":0},"generated":{"line":1,"column":152}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":3,"column":0},"generated":{"line":1,"column":173}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":3,"column":0},"generated":{"line":1,"column":175}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":3,"column":0},"generated":{"line":1,"column":183}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":0},"generated":{"line":1,"column":204}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":0},"generated":{"line":1,"column":206}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":0},"generated":{"line":1,"column":214}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":228}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":237}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":239}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":242}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":249}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":252}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":254}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":265}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":267}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":268}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":4,"column":53},"generated":{"line":1,"column":276}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":5,"column":0},"generated":{"line":1,"column":279}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"RemoteJWKSet","original":{"line":5,"column":6},"generated":{"line":1,"column":285}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"LocalJWKSet","original":{"line":5,"column":27},"generated":{"line":1,"column":295}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":5,"column":38},"generated":{"line":1,"column":297}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"constructor","original":{"line":6,"column":4},"generated":{"line":1,"column":309}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"url","original":{"line":6,"column":16},"generated":{"line":1,"column":321}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":6,"column":21},"generated":{"line":1,"column":323}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":9,"column":8},"generated":{"line":1,"column":326}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":7,"column":8},"generated":{"line":1,"column":329}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":7,"column":14},"generated":{"line":1,"column":335}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"keys","original":{"line":7,"column":16},"generated":{"line":1,"column":336}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":7,"column":22},"generated":{"line":1,"column":341}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":8,"column":8},"generated":{"line":1,"column":346}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_jwks","original":{"line":8,"column":13},"generated":{"line":1,"column":351}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"undefined","original":{"line":8,"column":21},"generated":{"line":1,"column":362}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"url","original":{"line":9,"column":14},"generated":{"line":1,"column":366}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"URL","original":{"line":9,"column":29},"generated":{"line":1,"column":379}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":10,"column":12},"generated":{"line":1,"column":384}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":10,"column":18},"generated":{"line":1,"column":390}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"TypeError","original":{"line":10,"column":22},"generated":{"line":1,"column":394}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":10,"column":32},"generated":{"line":1,"column":404}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":12,"column":8},"generated":{"line":1,"column":438}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_url","original":{"line":12,"column":13},"generated":{"line":1,"column":443}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":12,"column":20},"generated":{"line":1,"column":448}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"URL","original":{"line":12,"column":24},"generated":{"line":1,"column":452}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"url","original":{"line":12,"column":28},"generated":{"line":1,"column":456}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"href","original":{"line":12,"column":32},"generated":{"line":1,"column":458}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":13,"column":8},"generated":{"line":1,"column":464}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_options","original":{"line":13,"column":13},"generated":{"line":1,"column":469}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":13,"column":24},"generated":{"line":1,"column":478}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"agent","original":{"line":13,"column":26},"generated":{"line":1,"column":479}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":13,"column":33},"generated":{"line":1,"column":485}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":13,"column":33},"generated":{"line":1,"column":491}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":13,"column":74},"generated":{"line":1,"column":498}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":13,"column":83},"generated":{"line":1,"column":500}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"agent","original":{"line":13,"column":91},"generated":{"line":1,"column":502}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"headers","original":{"line":13,"column":98},"generated":{"line":1,"column":508}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":13,"column":107},"generated":{"line":1,"column":516}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":13,"column":107},"generated":{"line":1,"column":522}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":13,"column":148},"generated":{"line":1,"column":529}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":13,"column":157},"generated":{"line":1,"column":531}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"headers","original":{"line":13,"column":165},"generated":{"line":1,"column":533}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":14,"column":8},"generated":{"line":1,"column":542}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_timeoutDuration","original":{"line":14,"column":13},"generated":{"line":1,"column":547}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":15,"column":99},"generated":{"line":1,"column":564}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":15,"column":20},"generated":{"line":1,"column":581}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":15,"column":20},"generated":{"line":1,"column":587}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":15,"column":61},"generated":{"line":1,"column":594}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":15,"column":70},"generated":{"line":1,"column":596}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"timeoutDuration","original":{"line":15,"column":78},"generated":{"line":1,"column":598}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":15,"column":110},"generated":{"line":1,"column":615}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":15,"column":110},"generated":{"line":1,"column":621}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":15,"column":151},"generated":{"line":1,"column":628}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":15,"column":160},"generated":{"line":1,"column":630}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"timeoutDuration","original":{"line":15,"column":168},"generated":{"line":1,"column":632}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":15,"column":186},"generated":{"line":1,"column":648}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":16,"column":8},"generated":{"line":1,"column":652}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_cooldownDuration","original":{"line":16,"column":13},"generated":{"line":1,"column":657}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":17,"column":100},"generated":{"line":1,"column":675}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":17,"column":20},"generated":{"line":1,"column":692}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":17,"column":20},"generated":{"line":1,"column":698}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":17,"column":61},"generated":{"line":1,"column":705}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":17,"column":70},"generated":{"line":1,"column":707}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"cooldownDuration","original":{"line":17,"column":78},"generated":{"line":1,"column":709}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":17,"column":111},"generated":{"line":1,"column":727}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":17,"column":111},"generated":{"line":1,"column":733}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":17,"column":152},"generated":{"line":1,"column":740}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":17,"column":161},"generated":{"line":1,"column":742}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"cooldownDuration","original":{"line":17,"column":169},"generated":{"line":1,"column":744}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":17,"column":188},"generated":{"line":1,"column":761}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":18,"column":8},"generated":{"line":1,"column":765}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_cacheMaxAge","original":{"line":18,"column":13},"generated":{"line":1,"column":770}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":18,"column":111},"generated":{"line":1,"column":783}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":18,"column":36},"generated":{"line":1,"column":800}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":18,"column":36},"generated":{"line":1,"column":806}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":18,"column":77},"generated":{"line":1,"column":813}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":18,"column":86},"generated":{"line":1,"column":815}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"cacheMaxAge","original":{"line":18,"column":94},"generated":{"line":1,"column":817}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":18,"column":122},"generated":{"line":1,"column":830}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":18,"column":122},"generated":{"line":1,"column":836}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":18,"column":163},"generated":{"line":1,"column":843}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":18,"column":172},"generated":{"line":1,"column":845}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"cacheMaxAge","original":{"line":18,"column":180},"generated":{"line":1,"column":847}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":18,"column":194},"generated":{"line":1,"column":859}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"coolingDown","original":{"line":20,"column":4},"generated":{"line":1,"column":863}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":21,"column":8},"generated":{"line":1,"column":877}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":21,"column":46},"generated":{"line":1,"column":883}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":21,"column":22},"generated":{"line":1,"column":900}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_jwksTimestamp","original":{"line":21,"column":27},"generated":{"line":1,"column":905}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"Date","original":{"line":22,"column":14},"generated":{"line":1,"column":921}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"now","original":{"line":22,"column":19},"generated":{"line":1,"column":926}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":22,"column":27},"generated":{"line":1,"column":932}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_jwksTimestamp","original":{"line":22,"column":32},"generated":{"line":1,"column":937}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":22,"column":49},"generated":{"line":1,"column":952}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_cooldownDuration","original":{"line":22,"column":54},"generated":{"line":1,"column":957}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"fresh","original":{"line":25,"column":4},"generated":{"line":1,"column":975}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":26,"column":8},"generated":{"line":1,"column":983}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":26,"column":46},"generated":{"line":1,"column":989}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":26,"column":22},"generated":{"line":1,"column":1006}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_jwksTimestamp","original":{"line":26,"column":27},"generated":{"line":1,"column":1011}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"Date","original":{"line":27,"column":14},"generated":{"line":1,"column":1027}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"now","original":{"line":27,"column":19},"generated":{"line":1,"column":1032}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":27,"column":27},"generated":{"line":1,"column":1038}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_jwksTimestamp","original":{"line":27,"column":32},"generated":{"line":1,"column":1043}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":27,"column":49},"generated":{"line":1,"column":1058}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_cacheMaxAge","original":{"line":27,"column":54},"generated":{"line":1,"column":1063}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":30,"column":4},"generated":{"line":1,"column":1076}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"protectedHeader","original":{"line":30,"column":17},"generated":{"line":1,"column":1089}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"token","original":{"line":30,"column":34},"generated":{"line":1,"column":1091}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":31,"column":13},"generated":{"line":1,"column":1094}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_jwks","original":{"line":31,"column":18},"generated":{"line":1,"column":1099}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":31,"column":28},"generated":{"line":1,"column":1106}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"fresh","original":{"line":31,"column":33},"generated":{"line":1,"column":1111}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":32,"column":18},"generated":{"line":1,"column":1126}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"reload","original":{"line":32,"column":23},"generated":{"line":1,"column":1131}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":34,"column":8},"generated":{"line":1,"column":1140}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":35,"column":12},"generated":{"line":1,"column":1144}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":35,"column":25},"generated":{"line":1,"column":1157}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"getKey","original":{"line":35,"column":31},"generated":{"line":1,"column":1163}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"protectedHeader","original":{"line":35,"column":38},"generated":{"line":1,"column":1170}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"token","original":{"line":35,"column":55},"generated":{"line":1,"column":1172}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":37,"column":8},"generated":{"line":1,"column":1175}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"err","original":{"line":37,"column":15},"generated":{"line":1,"column":1181}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":38,"column":12},"generated":{"line":1,"column":1184}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"err","original":{"line":38,"column":16},"generated":{"line":1,"column":1187}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"JWKSNoMatchingKey","original":{"line":38,"column":31},"generated":{"line":1,"column":1200}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":38,"column":48},"generated":{"line":1,"column":1202}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":39,"column":43},"generated":{"line":1,"column":1222}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":39,"column":20},"generated":{"line":1,"column":1226}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"coolingDown","original":{"line":39,"column":25},"generated":{"line":1,"column":1231}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":41,"column":20},"generated":{"line":1,"column":1245}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":40,"column":26},"generated":{"line":1,"column":1258}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"reload","original":{"line":40,"column":31},"generated":{"line":1,"column":1263}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":41,"column":27},"generated":{"line":1,"column":1272}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"getKey","original":{"line":41,"column":33},"generated":{"line":1,"column":1278}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"protectedHeader","original":{"line":41,"column":40},"generated":{"line":1,"column":1285}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"token","original":{"line":41,"column":57},"generated":{"line":1,"column":1287}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":44,"column":12},"generated":{"line":1,"column":1290}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"err","original":{"line":44,"column":18},"generated":{"line":1,"column":1296}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":47,"column":4},"generated":{"line":1,"column":1299}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":48,"column":8},"generated":{"line":1,"column":1314}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":48,"column":12},"generated":{"line":1,"column":1317}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_pendingFetch","original":{"line":48,"column":17},"generated":{"line":1,"column":1322}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":48,"column":34},"generated":{"line":1,"column":1338}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"isCloudflareWorkers","original":{"line":48,"column":34},"generated":{"line":1,"column":1340}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":48,"column":53},"generated":{"line":1,"column":1342}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":49,"column":12},"generated":{"line":1,"column":1365}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":49,"column":19},"generated":{"line":1,"column":1372}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"Promise","original":{"line":49,"column":23},"generated":{"line":1,"column":1376}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"resolve","original":{"line":49,"column":32},"generated":{"line":1,"column":1384}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":50,"column":16},"generated":{"line":1,"column":1388}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"isDone","original":{"line":50,"column":22},"generated":{"line":1,"column":1394}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":50,"column":31},"generated":{"line":1,"column":1396}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"undefined","original":{"line":51,"column":47},"generated":{"line":1,"column":1406}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":51,"column":24},"generated":{"line":1,"column":1410}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_pendingFetch","original":{"line":51,"column":29},"generated":{"line":1,"column":1415}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"resolve","original":{"line":52,"column":24},"generated":{"line":1,"column":1429}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"setTimeout","original":{"line":55,"column":24},"generated":{"line":1,"column":1433}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"isDone","original":{"line":55,"column":35},"generated":{"line":1,"column":1444}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":55,"column":43},"generated":{"line":1,"column":1446}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"isDone","original":{"line":58,"column":16},"generated":{"line":1,"column":1450}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":61,"column":13},"generated":{"line":1,"column":1456}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_pendingFetch","original":{"line":61,"column":18},"generated":{"line":1,"column":1461}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":62,"column":12},"generated":{"line":1,"column":1477}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_pendingFetch","original":{"line":62,"column":17},"generated":{"line":1,"column":1482}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":62,"column":33},"generated":{"line":1,"column":1497}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"fetchJwks","original":{"line":62,"column":33},"generated":{"line":1,"column":1499}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":62,"column":42},"generated":{"line":1,"column":1501}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":62,"column":43},"generated":{"line":1,"column":1510}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_url","original":{"line":62,"column":48},"generated":{"line":1,"column":1515}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":62,"column":54},"generated":{"line":1,"column":1520}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_timeoutDuration","original":{"line":62,"column":59},"generated":{"line":1,"column":1525}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":62,"column":77},"generated":{"line":1,"column":1542}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_options","original":{"line":62,"column":82},"generated":{"line":1,"column":1547}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"then","original":{"line":63,"column":17},"generated":{"line":1,"column":1557}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"json","original":{"line":63,"column":23},"generated":{"line":1,"column":1562}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":64,"column":16},"generated":{"line":1,"column":1566}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":64,"column":21},"generated":{"line":1,"column":1571}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"isJWKSLike","original":{"line":64,"column":21},"generated":{"line":1,"column":1573}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":64,"column":31},"generated":{"line":1,"column":1575}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"json","original":{"line":64,"column":32},"generated":{"line":1,"column":1587}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":65,"column":20},"generated":{"line":1,"column":1590}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":65,"column":26},"generated":{"line":1,"column":1596}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"JWKSInvalid","original":{"line":65,"column":30},"generated":{"line":1,"column":1600}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":65,"column":41},"generated":{"line":1,"column":1602}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":65,"column":42},"generated":{"line":1,"column":1614}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":67,"column":16},"generated":{"line":1,"column":1644}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_jwks","original":{"line":67,"column":21},"generated":{"line":1,"column":1649}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":67,"column":29},"generated":{"line":1,"column":1655}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"keys","original":{"line":67,"column":31},"generated":{"line":1,"column":1656}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"json","original":{"line":67,"column":37},"generated":{"line":1,"column":1661}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"keys","original":{"line":67,"column":42},"generated":{"line":1,"column":1663}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":68,"column":16},"generated":{"line":1,"column":1669}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_jwksTimestamp","original":{"line":68,"column":21},"generated":{"line":1,"column":1674}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"Date","original":{"line":68,"column":38},"generated":{"line":1,"column":1689}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"now","original":{"line":68,"column":43},"generated":{"line":1,"column":1694}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":69,"column":16},"generated":{"line":1,"column":1700}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_pendingFetch","original":{"line":69,"column":21},"generated":{"line":1,"column":1705}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"undefined","original":{"line":69,"column":37},"generated":{"line":1,"column":1724}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"catch","original":{"line":71,"column":17},"generated":{"line":1,"column":1728}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"err","original":{"line":71,"column":24},"generated":{"line":1,"column":1734}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":73,"column":16},"generated":{"line":1,"column":1738}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":72,"column":16},"generated":{"line":1,"column":1744}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_pendingFetch","original":{"line":72,"column":21},"generated":{"line":1,"column":1749}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"undefined","original":{"line":72,"column":37},"generated":{"line":1,"column":1768}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"err","original":{"line":73,"column":22},"generated":{"line":1,"column":1770}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":76,"column":14},"generated":{"line":1,"column":1781}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"_pendingFetch","original":{"line":76,"column":19},"generated":{"line":1,"column":1786}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":79,"column":7},"generated":{"line":1,"column":1801}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"createRemoteJWKSet","original":{"line":79,"column":16},"generated":{"line":1,"column":1810}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"url","original":{"line":79,"column":35},"generated":{"line":1,"column":1812}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":79,"column":40},"generated":{"line":1,"column":1814}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":80,"column":4},"generated":{"line":1,"column":1817}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"RemoteJWKSet","original":{"line":80,"column":11},"generated":{"line":1,"column":1824}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"prototype","original":{"line":80,"column":24},"generated":{"line":1,"column":1826}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"getKey","original":{"line":80,"column":34},"generated":{"line":1,"column":1836}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"bind","original":{"line":80,"column":41},"generated":{"line":1,"column":1843}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","original":{"line":80,"column":46},"generated":{"line":1,"column":1848}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"RemoteJWKSet","original":{"line":80,"column":50},"generated":{"line":1,"column":1852}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"url","original":{"line":80,"column":63},"generated":{"line":1,"column":1854}},{"source":"node_modules/jose/dist/browser/jwks/remote.js","name":"options","original":{"line":80,"column":68},"generated":{"line":1,"column":1856}}],"sources":{"node_modules/jose/dist/browser/jwks/remote.js":"import fetchJwks from '../runtime/fetch_jwks.js';\r\nimport { isCloudflareWorkers } from '../runtime/env.js';\r\nimport { JWKSInvalid, JWKSNoMatchingKey } from '../util/errors.js';\r\nimport { isJWKSLike, LocalJWKSet } from './local.js';\r\nclass RemoteJWKSet extends LocalJWKSet {\r\n    constructor(url, options) {\r\n        super({ keys: [] });\r\n        this._jwks = undefined;\r\n        if (!(url instanceof URL)) {\r\n            throw new TypeError('url must be an instance of URL');\r\n        }\r\n        this._url = new URL(url.href);\r\n        this._options = { agent: options === null || options === void 0 ? void 0 : options.agent, headers: options === null || options === void 0 ? void 0 : options.headers };\r\n        this._timeoutDuration =\r\n            typeof (options === null || options === void 0 ? void 0 : options.timeoutDuration) === 'number' ? options === null || options === void 0 ? void 0 : options.timeoutDuration : 5000;\r\n        this._cooldownDuration =\r\n            typeof (options === null || options === void 0 ? void 0 : options.cooldownDuration) === 'number' ? options === null || options === void 0 ? void 0 : options.cooldownDuration : 30000;\r\n        this._cacheMaxAge = typeof (options === null || options === void 0 ? void 0 : options.cacheMaxAge) === 'number' ? options === null || options === void 0 ? void 0 : options.cacheMaxAge : 600000;\r\n    }\r\n    coolingDown() {\r\n        return typeof this._jwksTimestamp === 'number'\r\n            ? Date.now() < this._jwksTimestamp + this._cooldownDuration\r\n            : false;\r\n    }\r\n    fresh() {\r\n        return typeof this._jwksTimestamp === 'number'\r\n            ? Date.now() < this._jwksTimestamp + this._cacheMaxAge\r\n            : false;\r\n    }\r\n    async getKey(protectedHeader, token) {\r\n        if (!this._jwks || !this.fresh()) {\r\n            await this.reload();\r\n        }\r\n        try {\r\n            return await super.getKey(protectedHeader, token);\r\n        }\r\n        catch (err) {\r\n            if (err instanceof JWKSNoMatchingKey) {\r\n                if (this.coolingDown() === false) {\r\n                    await this.reload();\r\n                    return super.getKey(protectedHeader, token);\r\n                }\r\n            }\r\n            throw err;\r\n        }\r\n    }\r\n    async reload() {\r\n        if (this._pendingFetch && isCloudflareWorkers()) {\r\n            return new Promise((resolve) => {\r\n                const isDone = () => {\r\n                    if (this._pendingFetch === undefined) {\r\n                        resolve();\r\n                    }\r\n                    else {\r\n                        setTimeout(isDone, 5);\r\n                    }\r\n                };\r\n                isDone();\r\n            });\r\n        }\r\n        if (!this._pendingFetch) {\r\n            this._pendingFetch = fetchJwks(this._url, this._timeoutDuration, this._options)\r\n                .then((json) => {\r\n                if (!isJWKSLike(json)) {\r\n                    throw new JWKSInvalid('JSON Web Key Set malformed');\r\n                }\r\n                this._jwks = { keys: json.keys };\r\n                this._jwksTimestamp = Date.now();\r\n                this._pendingFetch = undefined;\r\n            })\r\n                .catch((err) => {\r\n                this._pendingFetch = undefined;\r\n                throw err;\r\n            });\r\n        }\r\n        await this._pendingFetch;\r\n    }\r\n}\r\nexport function createRemoteJWKSet(url, options) {\r\n    return RemoteJWKSet.prototype.getKey.bind(new RemoteJWKSet(url, options));\r\n}\r\n"},"lineCount":null}},"error":null,"hash":"34c8f9d243dd103e9b13c5debf028929","cacheData":{"env":{}}}